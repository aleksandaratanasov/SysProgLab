#include "../Scanner/Scanner.h"
#include "../Scanner/Information.h"
#include "../Scanner/Token.h"
#include <iostream>
#include "../Scanner/t_const.h"
#include "Parser.h"


#include "../Container/ObjectContainer.h"

#include "../IO/ConsoleOutBuffer.h"
#include "../IO/ThreadFileOutBuffer.h"

using std::cout;
using std::endl;


int main(int argc, char **argv) {
  if (argc < 2) {
    cout << "usage: interpreter infile outfile" << endl;
    return 1;
  } else {
    cout << "interpreter " << argv[1] << " " << argv[2] << ":" <<  endl;
  }
    
  const char* keywords[] = {"print","read","int","while","if","else"};

  ObjectContainer<Information>* IOC = new ObjectContainer<Information>(1024);
  Scanner* SC = new Scanner(IOC, argv[1], keywords, 6);
  
  //OutBuffer* out = new ConsoleOutBuffer();
  OutBuffer* out = new ThreadFileOutBuffer(argv[2]);
  
  Parser* parser = new Parser(SC, out);
  
  delete out;

  return 0;
}